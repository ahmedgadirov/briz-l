version: "3.1"

stories:
  - story: ask about cataract condition
    steps:
      - intent: ask_about_condition
        entities:
          - medical_condition: "katarakta"
      - action: action_educate
      - slot_was_set:
          - education_topic: "cataract"
          - education_type: "condition"
          - education_depth: 0
  
  - story: ask more details about condition
    steps:
      - intent: ask_about_condition
      - action: action_educate
      - slot_was_set:
          - education_depth: 0
      - intent: ask_more_details
      - action: action_educate
      - slot_was_set:
          - education_depth: 1
  
  - story: progressive disclosure - multiple layers
    steps:
      - intent: ask_about_condition
        entities:
          - medical_condition: "katarakta"
      - action: action_educate
      - slot_was_set:
          - education_depth: 0
      - intent: ask_more_details
      - action: action_educate
      - slot_was_set:
          - education_depth: 1
      - intent: ask_more_details
      - action: action_educate
      - slot_was_set:
          - education_depth: 2
  
  - story: ask about laser procedure
    steps:
      - intent: ask_about_procedure
        entities:
          - medical_procedure: "lasik"
      - action: action_educate
      - slot_was_set:
          - education_topic: "excimer_laser"
          - education_type: "procedure"
  
  - story: search for medical information
    steps:
      - intent: search_medical_info
      - action: action_search_education
  
  - story: list available conditions
    steps:
      - intent: list_conditions
      - action: action_list_conditions
  
  - story: triage then education
    steps:
      - intent: symptom_blurry_vision
      - action: action_triage_patient
      - action: action_educate
  
  - story: education with FAQ
    steps:
      - intent: ask_about_procedure
      - action: action_educate
      - slot_was_set:
          - education_depth: 0
      - intent: ask_faq
      - action: action_educate

rules:
  - rule: Always detect language first
    steps:
      - action: action_detect_language
  
  - rule: Educate on condition query
    steps:
      - intent: ask_about_condition
      - action: action_educate
  
  - rule: Educate on procedure query  
    steps:
      - intent: ask_about_procedure
      - action: action_educate
  
  - rule: Search when requested
    steps:
      - intent: search_medical_info
      - action: action_search_education
  
  - rule: List conditions when asked
    steps:
      - intent: list_conditions
      - action: action_list_conditions
